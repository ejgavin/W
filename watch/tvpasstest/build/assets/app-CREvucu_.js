document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("stream_name"),g=s==null?void 0:s.getAttribute("name");if(!g){console.error("Stream name element not found or invalid.");return}const y=`/token/${g}`;function d(n,o="danger"){const t=document.getElementById("alertContainer");if(!t){console.error("Alert container not found.");return}if(t)for(;t.firstChild;)t.removeChild(t.firstChild);const e=document.createElement("div");e.className=`
            p-4 mb-4 border rounded-lg shadow-md flex justify-between items-center
            ${o==="primary"?"bg-blue-100 text-blue-800 border-blue-200":""}
            ${o==="success"?"bg-green-100 text-green-800 border-green-200":""}
            ${o==="danger"?"bg-red-100 text-red-800 border-red-200":""}
            ${o==="warning"?"bg-yellow-100 text-yellow-800 border-yellow-200":""}
        `,e.setAttribute("role","alert"),e.innerHTML=`
            <span>${n}</span>
            <button type="button" class="ml-4 text-xl font-bold focus:outline-none text-current hover:text-opacity-70">
                &times;
            </button>
        `,e.querySelector("button").addEventListener("click",()=>{e.remove()}),t.appendChild(e)}function c(n,o){n.classList.add("bg-blue-500","text-white","shadow"),n.classList.remove("bg-gray-500","text-gray-100"),o.forEach(t=>{t.classList.add("bg-gray-500","text-gray-100"),t.classList.remove("bg-blue-500","text-white","shadow")})}async function i(n="sd"){const o=`${y}?quality=${n}`,t=document.getElementById("player");try{const e=await fetch(o);if(!e.ok)throw new Error("Failed to fetch the m3u8 URL.");const u=await e.json();if(u.status==="false"&&d("We are experiencing a high volume of connections. As a result, HD and Full HD streams are available to subscribers only at the moment.","danger"),u.status==="failed"){d("Our server is currently full. Please try again later. We apologize for the inconvenience and appreciate your patience.","danger");return}const b=u.url;if(!b)throw new Error("m3u8 URL not found in the response.");const f=jwplayer("player");f.setup({file:b,width:"100%",aspectratio:"16:9",mute:!1,autostart:!0,cast:{},airplay:!0,sharing:{sites:["facebook","twitter","email","pinterest","reddit"]}}),f.on("error",h=>{console.error("Player encountered an error:",h.message);const l=document.createElement("div");l.id="error-message",l.className="p-4 bg-red-100 text-red-700 rounded-lg shadow-md mt-4",l.innerHTML=`
                    <p class="font-semibold">We encountered an issue while playing the video. Please try the following options:</p>
                    <div class="mt-3 flex gap-2">
                        <button id="retryVideo" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300">Retry</button>
                        <button id="reloadPage" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-300">Reload Page</button>
                    </div>
                `,t.appendChild(l),document.getElementById("retryVideo").addEventListener("click",()=>{l.remove(),i()}),document.getElementById("reloadPage").addEventListener("click",()=>{location.reload()})})}catch(e){console.error("Error loading the video:",e),d(`Unable to load the video: ${e.message}. Please try again later.`,"danger")}}const m=document.getElementById("loadVideoBtn"),r=document.getElementById("loadVideoSD"),a=document.getElementById("loadVideoHD");m&&m.addEventListener("click",function(){i(),this.style.display="none",c(r,[a])}),r&&a&&(r.addEventListener("click",function(){i("sd"),c(r,[a])}),a.addEventListener("click",function(){i("hd"),c(a,[r])}))});
